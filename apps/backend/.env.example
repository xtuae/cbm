# ===============================================================================================
# CREDITS MARKETPLACE PLATFORM - BACKEND ENVIRONMENT VARIABLES
# ===============================================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit actual secrets to version control

# ===============================================================================================
# SERVER CONFIGURATION
# ===============================================================================================

# Server port (default: 3000)
PORT=3000

# Node environment
NODE_ENV=development

# API base URL for documentation and external references
API_BASE_URL=http://localhost:3000

# ===============================================================================================
# DATABASE CONFIGURATION
# ===============================================================================================

# Primary PostgreSQL database connection URL
# Format: postgresql://username:password@host:port/database
# Note: This project uses Supabase only. No local PostgreSQL database.
# All database operations go through the Supabase API.

# Database connection pool configuration
DB_POOL_MIN=2
DB_POOL_MAX=20

# Database SSL configuration (set to 'true' for production)
DB_SSL=require

# Database timeout configurations (in milliseconds)
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000

# ===============================================================================================
# SUPABASE CONFIGURATION
# ===============================================================================================

# Supabase project URL
SUPABASE_URL=https://your-project.supabase.co

# Supabase anonymous/public key (safe to expose in frontend)
SUPABASE_ANON_KEY=your-anonymous-key-here

# Supabase service role key (NEVER expose, admin-only operations)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ===============================================================================================
# AUTHENTICATION CONFIGURATION
# ===============================================================================================

# JWT signing secret (minimum 32 characters, use cryptographically secure random string)
JWT_SECRET=your-super-secure-jwt-secret-key-minimum-32-characters

# JWT expiration time (in seconds)
JWT_EXPIRY=3600

# Session configuration
SESSION_SECRET=your-session-secret-key-for-express-sessions

# Password requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=true

# OAuth configuration (if using external providers)
GOOGLE_CLIENT_ID=your-google-oauth-client-id
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret
GITHUB_CLIENT_ID=your-github-oauth-client-id
GITHUB_CLIENT_SECRET=your-github-oauth-client-secret

# ===============================================================================================
# PAYMENT GATEWAY CONFIGURATION
# ===============================================================================================

# Stripe Payment Gateway (recommended)
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret

# Alternative: PayPal
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
PAYPAL_ENVIRONMENT=sandbox

# Alternative: Coinbase Commerce
COINBASE_API_KEY=your-coinbase-api-key
COINBASE_WEBHOOK_SECRET=your-coinbase-webhook-secret
COINBASE_SHARED_SECRET=your-coinbase-shared-secret

# Payment limits and fees
PAYMENT_MIN_AMOUNT=1.00
PAYMENT_MAX_AMOUNT=10000.00
PAYMENT_DEFAULT_CURRENCY=USD

# ===============================================================================================
# CRYPTO/BLOCKCHAIN CONFIGURATION
# ===============================================================================================

# Ethereum/Polygon RPC URLs
ETHEREUM_RPC_URL=https://mainnet.infura.io/v3/your-infura-project-id
POLYGON_RPC_URL=https://polygon-mainnet.infura.io/v3/your-infura-project-id

# Admin wallet for NILA transfers (NEVER fund this with significant amounts)
BLOCKCHAIN_ADMIN_PRIVATE_KEY=your-admin-ethereum-private-key
BLOCKCHAIN_ADMIN_ADDRESS=0x0000000000000000000000000000000000000000

# NILA Token Contract Addresses
NILA_TOKEN_CONTRACT_ETHEREUM=0x0000000000000000000000000000000000000000
NILA_TOKEN_CONTRACT_POLYGON=0x0000000000000000000000000000000000000000
NILA_TOKEN_DECIMALS=18

# Gas price configuration
BLOCKCHAIN_MAX_GAS_PRICE=50000000000
BLOCKCHAIN_GAS_LIMIT=21000

# ===============================================================================================
# WEBHOOK CONFIGURATION
# ===============================================================================================

# Webhook security
WEBHOOK_SECRET=your-webhook-secret-for-verification
WEBHOOK_TIMEOUT=30000

# Webhook retry configuration
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY=5000

# External webhook endpoints (for integrations)
EXTERNAL_WEBHOOK_URL=https://your-external-service.com/webhooks

# ===============================================================================================
# EMAIL CONFIGURATION
# ===============================================================================================

# SMTP Configuration for transactional emails (order confirmations, etc.)
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_SECURE=false
EMAIL_SMTP_USER=your-email@gmail.com
EMAIL_SMTP_PASS=your-app-password

# Email branding and sender configuration
EMAIL_FROM_NAME=Credits Marketplace
EMAIL_FROM=noreply@yourdomain.com

# Frontend URL for email links (dashboard links, etc.)
FRONTEND_URL=https://yourdomain.com

# ===============================================================================================
# LOGGING AND MONITORING
# ===============================================================================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# External logging services
LOGTAIL_API_KEY=your-logtail-api-key
SENTRY_DSN=your-sentry-dsn

# ===============================================================================================
# EXTERNAL API KEYS
# ===============================================================================================

# Rate limiting and analytics
SENDGRID_API_KEY=your-sendgrid-api-key-for-emails

# Analytics and tracking
ANALYTICS_TRACKING_ID=your-analytics-tracking-id
MIXPANEL_TOKEN=your-mixpanel-token

# ===============================================================================================
# SECURITY CONFIGURATION
# ===============================================================================================

# CORS configuration
CORS_ORIGINS=http://localhost:5174,http://localhost:3000,https://yourdomain.com
CORS_CREDENTIALS=true

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Content Security Policy
CSP_ENABLED=true

# ===============================================================================================
# DEVELOPMENT ONLY CONFIGURATION
# ===============================================================================================

# Enable debug logging in development
DEBUG=cbm-platform:*

# Skip email verification in development
SKIP_EMAIL_VERIFICATION=true

# Skip bank verification in development (use test values)
ENABLE_BANK_TEST_MODE=true

# ===============================================================================================
# PRODUCTION CHECKLIST
# ===============================================================================================
# Before deploying to production:
# 1. Replace all placeholder values with real secrets
# 2. Use strong, unique secrets for all keys
# 3. Enable SSL/TLS (DB_SSL=true)
# 4. Configure proper CORS origins
# 5. Set up monitoring and logging
# 6. Configure proper SMTP/email services
# 7. Set up blockchain RPC endpoints
# 8. NEVER commit actual secrets to version control
# 9. Use environment-specific config files (.env.production, .env.staging)
# ===============================================================================================
